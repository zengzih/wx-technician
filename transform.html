<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <!-- <script
      type="text/javascript"
      src="http://api.map.baidu.com/api?v=xxx"
    ></script> -->
  </head>
  <body></body>
  <script>
    const params = {
      userType: ''
    };

    class Watch {
      constructor({ data, func = Function }) {
        debugger
        this.data = data || app.publicParams;
        this.callbackFunc = func
        this.initDetail()
      }

      initDetail() {
        const { data } = this;
        if (toString.call(data) == '[object Object]') {
          for (let key in data) {
            this.defineProperty(data, key, data[key])
          }
        }
      }

      defineProperty(obj, key, value) {
        const self = this;
        Object.defineProperty(obj, key, {
          get() {
            return value
          },
          set(val) {
            if (val !== value) {
              value = val;
              self.callbackFunc(key, val)
            }
          }
        });
      }
    }

  </script>
</html>
